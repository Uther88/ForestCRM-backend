(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"+es5":function(t,e,a){"use strict";var o=a("/HBM"),i=a.n(o);i.a},"/HBM":function(t,e,a){},bvBj:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex row flex-center q-pa-sm"},[a("form",{staticClass:"col-xs-12 col-md-auto animate-pop"},[a("q-stepper",{ref:"stepper",attrs:{color:"primary",contractable:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[a("q-step",{attrs:{default:"",title:"Главное",subtitle:"Основные данные","active-icon":"assignment",order:1,name:"main"}},[a("q-field",{attrs:{label:"Номер",orientation:"vertical"}},[a("q-input",{attrs:{type:"text",disable:!t.is_editable},model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}})],1),a("q-field",{attrs:{label:"Дата",orientation:"vertical"}},[a("q-datetime",{attrs:{type:"date",value:t.form.date,disable:!t.is_editable,format:"DD.MM.YYYY"},on:{change:function(e){t.form.date=new Date(e).toDateString()}}})],1),a("q-field",{attrs:{label:"Период",orientation:"horizontal","label-width":"3"}},[a("q-toggle",{attrs:{disable:!t.is_editable},model:{value:t.periodic,callback:function(e){t.periodic=e},expression:"periodic"}}),t.periodic?a("q-datetime",{attrs:{type:"date",disable:!t.is_editable,value:t.form.period_from,readonly:!t.is_editable,clearable:""},on:{change:function(e){t.form.period_from=new Date(e).toDateString()}}}):t._e(),t.periodic?a("q-datetime",{attrs:{type:"date",disable:!t.is_editable,value:t.form.period_to,readonly:!t.is_editable,clearable:"",min:t.form.period_from},on:{change:function(e){t.form.period_to=new Date(e).toDateString()}}}):t._e()],1),a("q-field",{attrs:{label:"Организация",orientation:"vertical"}},[a("q-select",{attrs:{disable:!t.is_editable,options:t.options.organizations.map(function(t){return{label:t.name,value:t.id}})},model:{value:t.form.organization,callback:function(e){t.$set(t.form,"organization",e)},expression:"form.organization"}})],1),a("q-field",{attrs:{label:"Участок",orientation:"vertical"}},[a("q-select",{attrs:{disable:!t.is_editable,options:t.options.stations.map(function(t){return{label:t.name,value:t.id}})},model:{value:t.form.station,callback:function(e){t.$set(t.form,"station",e)},expression:"form.station"}})],1),a("q-field",{attrs:{label:"Отдел",orientation:"vertical"}},[a("q-select",{attrs:{disable:!t.is_editable,options:t.options.departaments},model:{value:t.form.departament,callback:function(e){t.$set(t.form,"departament",e)},expression:"form.departament"}})],1),a("q-field",{attrs:{label:"Тип",orientation:"vertical"}},[a("q-select",{attrs:{disable:!t.is_editable,options:t.options.types},on:{input:function(e){t.form.car=null}},model:{value:t.form.type_of,callback:function(e){t.$set(t.form,"type_of",e)},expression:"form.type_of"}})],1),a("q-field",{attrs:{label:"Автомобиль",orientation:"vertical"}},[a("q-select",{attrs:{filter:"",separator:"",disable:!t.is_editable,options:t.options.cars.map(function(t){return{label:t.full_name,value:t.id}})},on:{input:t.changeCar},model:{value:t.form.car,callback:function(e){t.$set(t.form,"car",e)},expression:"form.car"}})],1)],1),a("q-step",{attrs:{title:"Персонал",name:"personal",subtitle:"Водитель, диспетчер и т.д.",icon:"person","active-icon":"person",order:2}},[a("q-field",{attrs:{label:"Водитель",orientation:"vertical"}},[a("q-select",{attrs:{filter:"",separator:"",disable:!t.is_editable,options:t.options.workers.map(function(t){return{label:t.full_name,value:t.id}})},model:{value:t.form.driver,callback:function(e){t.$set(t.form,"driver",e)},expression:"form.driver"}})],1),a("q-field",{attrs:{label:"Диспетчер",orientation:"vertical"}},[a("q-select",{attrs:{clearable:"",filter:"",separator:"",disable:!t.is_editable,options:t.options.workers.map(function(t){return{label:t.full_name,value:t.id}})},model:{value:t.form.dispatcher,callback:function(e){t.$set(t.form,"dispatcher",e)},expression:"form.dispatcher"}})],1),a("q-field",{attrs:{label:"Выезд разрешен, механик",orientation:"vertical"}},[a("q-select",{attrs:{filter:"",separator:"",disable:!t.is_editable,options:t.options.workers.map(function(t){return{label:t.full_name,value:t.id}})},model:{value:t.form.check_out_allow,callback:function(e){t.$set(t.form,"check_out_allow",e)},expression:"form.check_out_allow"}})],1),a("q-field",{attrs:{label:"Автомобиль принял, водитель",orientation:"vertical"}},[a("q-select",{attrs:{filter:"",separator:"",disable:!t.is_editable,options:t.options.workers.map(function(t){return{label:t.full_name,value:t.id}})},model:{value:t.form.car_took,callback:function(e){t.$set(t.form,"car_took",e)},expression:"form.car_took"}})],1),a("q-field",{attrs:{label:"Автомобиль сдал, водитель",orientation:"vertical"}},[a("q-select",{attrs:{filter:"",separator:"",disable:!t.is_editable,options:t.options.workers.map(function(t){return{label:t.full_name,value:t.id}})},model:{value:t.form.auto_passed,callback:function(e){t.$set(t.form,"auto_passed",e)},expression:"form.auto_passed"}})],1),a("q-field",{attrs:{label:"Автомобиль принял, механик",filter:"",separator:"",orientation:"vertical"}},[a("q-select",{attrs:{disable:!t.is_editable,options:t.options.workers.map(function(t){return{label:t.full_name,value:t.id}})},model:{value:t.form.auto_accept,callback:function(e){t.$set(t.form,"auto_accept",e)},expression:"form.auto_accept"}})],1)],1),a("q-step",{staticClass:"tasks-table",attrs:{title:"Задания",name:"tasks",subtitle:"Задания для водителя",icon:"event_note","active-icon":"event_note",order:3}},[a("q-table",{staticStyle:{"min-height":"65vh"},attrs:{data:t.form.tasks,columns:t.options.taskColumns,"hide-bottom":""},scopedSlots:t._u([{key:"top-left",fn:function(e){return[a("q-btn",{staticClass:"q-ma-sm",attrs:{icon:"add",color:t.form.is_completed?"negative":"positive",disabled:t.instance&&t.instance.is_completed,type:"button"},nativeOn:{click:function(e){return t.addDriverTask(e)}}})]}},{key:"body-cell-options",fn:function(e){return a("q-td",{attrs:{props:e}},[a("q-btn",{attrs:{disabled:e.row.id,icon:"edit",dense:"",color:"primary",type:"button"},nativeOn:{click:function(a){t.editTask(e.row)}}}),a("q-btn",{attrs:{disabled:e.row.id,icon:"remove",dense:"",color:"negative",type:"button"},nativeOn:{click:function(a){t.form.tasks=t.form.tasks.filter(function(t){return t!==e.row})}}})],1)}}])})],1),a("q-step",{staticClass:"tasks-table",attrs:{title:"Перемещение",name:"motions",subtitle:"Топливо, даты и прочее",icon:"local_shipping","active-icon":"local_shipping",order:4}},[a("table",{staticClass:"q-table q-table-horizontal-separator text-center shadow-1"},[a("thead",{staticClass:"bg-tertiary"},[a("tr",[a("th",[a("q-icon",{attrs:{name:"compare_arrows",color:"primary",size:"25pt"}}),a("q-tooltip",[t._v("Направление")])],1),a("th",[a("q-icon",{attrs:{name:"local_gas_station",color:"negative",size:"25pt"}}),a("q-tooltip",[t._v("Баланс топлива")])],1),a("th",[a("q-icon",{attrs:{name:"network_check",color:"positive",size:"25pt"}}),a("q-tooltip",[t._v("Показания спидометра")])],1),a("th",{attrs:{align:"center"}},[a("q-icon",{attrs:{name:"date_range",color:"secondary",size:"25pt"}}),a("q-tooltip",[t._v("Дата")])],1)])]),a("tbody",[a("tr",[a("td",[a("q-icon",{attrs:{name:"local_shippingarrow_forward",color:"primary",size:"18pt"}}),a("q-tooltip",{staticClass:"bg-primary"},[t._v("Выезд")])],1),a("td",[a("q-chip",{attrs:{color:"negative"}},[t._v("\n                    "+t._s(t.form.fuel_balance_on_dep)+"\n                  ")])],1),a("td",[a("q-chip",{attrs:{color:"positive"}},[t._v("\n                    "+t._s(t.form.dep_km)+"\n                  ")])],1),a("td",[t.form.dep_date?a("q-chip",{staticClass:"q-pa-xs",attrs:{square:"",color:"secondary"}},[t._v("\n                  "+t._s(new Date(t.form.dep_date).toLocaleDateString())),a("br"),t._v("\n                  "+t._s(new Date(t.form.dep_date).toLocaleTimeString())+"\n                  ")]):t._e()],1)]),a("tr",[a("td",[a("q-icon",{staticClass:"rotate-180 flip-horizontal",attrs:{name:"local_shippingarrow_forward",color:"primary",size:"18pt"}}),a("q-tooltip",{staticClass:"bg-primary"},[t._v("Возвращение")])],1),a("td",[a("q-chip",{attrs:{color:"negative"}},[t._v("\n                    "+t._s(t.form.fuel_balance_on_ret)+"\n                  ")])],1),a("td",[a("q-chip",{attrs:{color:"positive"}},[t._v("\n                    "+t._s(t.form.ret_km)+"\n                  ")])],1),a("td",[t.form.ret_date?a("q-chip",{staticClass:"q-pa-xs",attrs:{square:"",color:"secondary"}},[t._v("\n                  "+t._s(new Date(t.form.ret_date).toLocaleDateString())),a("br"),t._v("\n                  "+t._s(new Date(t.form.ret_date).toLocaleTimeString())+"\n                  ")]):t._e()],1)])]),a("tfoot",[a("tr",{staticClass:"text-bold"},[a("td",{staticClass:"bg-primary text-white"},[t._v("\n                  Итого:\n                ")]),a("td",{staticClass:"bg-negative text-white"},[t._v("\n                  Топлива: "+t._s(t.form.total_fuel)+"\n                ")]),a("td",{staticClass:"bg-positive text-white"},[t._v("\n                  Км: "+t._s(t.form.total_km)+"\n                ")]),a("td",{staticClass:"bg-secondary text-white"},[t._v("\n                  Часов: "+t._s(t.form.total_hours)+"\n                ")])])])]),a("div",{staticClass:"row q-pa-sm gutter-md justify-around"},[a("q-field",{staticClass:"text-bold",attrs:{label:"Топлива выданно:","label-width":"6"}},[a("input",{directives:[{name:"model",rawName:"v-model.sync",value:t.form.fuel_issued,expression:"form.fuel_issued",modifiers:{sync:!0}}],attrs:{type:"number",min:"0",step:"1",disabled:t.instance&&t.instance.is_completed},domProps:{value:t.form.fuel_issued},on:{input:function(e){e.target.composing||t.$set(t.form,"fuel_issued",e.target.value)}}})]),a("q-toggle",{attrs:{label:"Завершено",disable:t.instance&&t.instance.is_completed},model:{value:t.form.is_completed,callback:function(e){t.$set(t.form,"is_completed",e)},expression:"form.is_completed"}}),a("div",{staticClass:"col-12"},[a("q-input",{staticClass:"shadow-1 q-pa-xs",attrs:{type:"textarea","stack-label":"Комментарий","hide-underline":"",disable:t.instance&&t.instance.is_completed},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1)],1)]),a("q-stepper-navigation",[a("div",{staticClass:"col-12 flex flex-center group"},[a("q-btn",{attrs:{label:"Назад",color:"warning",type:"button",disabled:"main"==t.step},on:{click:function(e){t.$refs.stepper.previous()}}}),"motions"==t.step?a("q-btn",{attrs:{color:t.is_valid?"positive":"negative",disabled:!t.is_valid,label:t.instance&&t.instance.is_completed?"Закрыть":"Сохранить",type:"button"},nativeOn:{click:function(e){return t.saveWaybill(e)}}}):a("q-btn",{attrs:{label:"Далее",color:t.sectionComplete?"primary":"negative",type:"button",disabled:!t.sectionComplete},on:{click:function(e){t.$refs.stepper.next()}}})],1)])],1),a("q-modal",{attrs:{"no-backdrop-dismiss":"","content-classes":"flex column justify-between","content-css":"max-height: 100%;"},on:{hide:t.clearTaskForm},model:{value:t.showTaskdialog,callback:function(e){t.showTaskdialog=e},expression:"showTaskdialog"}},[a("q-toolbar",{attrs:{align:"center"}},[a("q-toolbar-title",[t._v("Задание для водителя")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{icon:"close",flat:"",type:"button"}})],1),a("div",{staticClass:"q-pa-sm"},[a("form",[a("q-field",{attrs:{label:"Пункт отправления","label-width":"6"}},[a("q-input",{attrs:{type:"text",autocomplete:"on"},model:{value:t.taskForm.from_dest,callback:function(e){t.$set(t.taskForm,"from_dest",e)},expression:"taskForm.from_dest"}})],1),a("q-field",{attrs:{label:"Пункт назначения","label-width":"6"}},[a("q-input",{attrs:{type:"text",autocomplete:"on"},model:{value:t.taskForm.to_dest,callback:function(e){t.$set(t.taskForm,"to_dest",e)},expression:"taskForm.to_dest"}})],1),a("q-field",{attrs:{label:"Выезд","label-width":"5"}},[a("q-datetime",{attrs:{type:"datetime",modal:"",value:t.taskForm.departure,format:"DD.MM.YYYY, HH:mm",max:t.taskForm.arrival,clearable:""},on:{change:function(e){t.taskForm.departure=new Date(e).toString().split("GMT")[0]}}})],1),a("q-field",{attrs:{label:"Прибытие","label-width":"5"}},[a("q-datetime",{attrs:{type:"datetime",modal:"",value:t.taskForm.arrival,clearable:"",min:t.taskForm.departure,format:"DD.MM.YYYY, HH:mm"},on:{change:function(e){t.taskForm.arrival=new Date(e).toString().split("GMT")[0]}}})],1),a("q-field",{attrs:{label:"Расстояние","label-width":"6"}},[a("q-input",{attrs:{type:"number"},on:{input:t.calcTotalFuel},model:{value:t.taskForm.distance,callback:function(e){t.$set(t.taskForm,"distance",t._n(e))},expression:"taskForm.distance"}})],1),a("q-field",{attrs:{label:"Вид работы","label-width":"6"}},[a("q-input",{attrs:{type:"text"},model:{value:t.taskForm.kind,callback:function(e){t.$set(t.taskForm,"kind",e)},expression:"taskForm.kind"}})],1),a("q-field",{attrs:{label:"Условия","label-width":"6"}},[a("q-select",{attrs:{options:t.options.conditions},on:{input:t.calcTotalFuel},model:{value:t.taskForm.conditions,callback:function(e){t.$set(t.taskForm,"conditions",e)},expression:"taskForm.conditions"}})],1),a("q-field",{staticClass:"text-bold q-pa-sm",attrs:{label:"Итого топлива","label-width":"6",orientation:"horizontal"}},[a("q-input",{staticClass:"shadow-1",staticStyle:{width:"70px",margin:"auto"},attrs:{type:"text",align:"center",readonly:"","hide-underline":""},model:{value:t.taskForm.total_fuel,callback:function(e){t.$set(t.taskForm,"total_fuel",e)},expression:"taskForm.total_fuel"}})],1)],1)]),a("q-toolbar",{staticClass:"justify-around"},[a("q-btn",{attrs:{type:"button",icon:"delete",label:"Отчистить",color:"negative"},nativeOn:{click:function(e){return t.clearTaskForm(e)}}}),a("q-btn",{attrs:{type:"button",icon:"save",label:"Сохранить",color:"positive",disabled:!t.taskFormIsValid},nativeOn:{click:function(e){return t.saveTask(e)}}})],1)],1)],1)])},i=[];o._withStripped=!0;a("f3/d"),a("Vd3H"),a("INYr"),a("yt8O"),a("RW0V"),a("rGqo"),a("dRSK");var s=a("9JDm"),r={name:"WaybillDetailPage",props:["id"],data:function(){var t=this;return{showTaskdialog:!1,selectedCar:null,instance:null,periodic:!1,step:"main",form:{number:null,organization:null,station:null,departament:null,type_of:null,car:null,date:null,period_from:null,period_to:null,dep_date:null,dep_km:null,ret_date:null,ret_km:null,fuel:null,fuel_issued:0,fuel_balance_on_dep:null,fuel_balance_on_ret:null,driver:null,dispatcher:null,check_out_allow:null,car_took:null,auto_accept:null,auto_passed:null,total_km:null,total_hours:null,total_fuel:null,comment:null,is_completed:!1,tasks:[]},taskForm:{from_dest:null,to_dest:null,departure:null,arrival:null,distance:null,kind:null,conditions:null,total_fuel:null},options:{organizations:[],stations:[],departaments:[{label:"Лес",value:"les"},{label:"Цех",value:"ceh"},{label:"ПХС",value:"phs"},{label:"МТМ",value:"mtm"}],types:[{label:"Легковой автомобиль",value:"L"},{label:"Грузовой автомобиль",value:"H"}],cars:[],workers:[],conditions:[{label:"Лето, нормальные",value:"SN"},{label:"Лето, тяжелые",value:"SH"},{label:"Зима, нормальные",value:"WN"},{label:"Зима, тяжелые",value:"WH"}],taskColumns:[{name:"options",label:"Опции",field:"id"},{name:"from_dest",label:"Из",field:"from_dest",align:"center"},{name:"to_dest",label:"В",field:"to_dest",align:"center"},{name:"departure",label:"Выезд",field:"departure",format:function(t){return new Date(t).toLocaleDateString()+" - "+new Date(t).toLocaleTimeString()},align:"center"},{name:"arrival",label:"Прибытие",field:"arrival",format:function(t){return new Date(t).toLocaleDateString()+" - "+new Date(t).toLocaleTimeString()},align:"center"},{name:"distance",label:"Расстояние",field:"distance",align:"center"},{name:"kind",label:"Вид работы",field:"kind",align:"center"},{name:"conditions",label:"Условия",field:function(e){return t.options.conditions.find(function(t){return t.value==e.conditions}).label},align:"center"}],required_fields:["number","date","organization","station","type_of","car","driver","car_took","check_out_allow","auto_accept","auto_passed","dep_date","dep_km","fuel_balance_on_dep","ret_date","ret_km","fuel_balance_on_ret","total_fuel","total_km","total_hours","fuel_issued"]}}},methods:{saveWaybill:function(){var t=this;if(this.instance&&this.instance.is_completed)return this.$router.go(-1);if(this.is_valid){var e=JSON.stringify(this.form),a=this.instance?this.instance.id+"/":"";this.$axios.post("/api/v1/waybill/"+a,e).then(function(e){t.$router.push("/docs/waybills")}).catch(function(t){})}},addDriverTask:function(){this.showTaskdialog=!0},editTask:function(t){var e=this;Object.keys(t).forEach(function(a){e.taskForm[a]=t[a]}),this.showTaskdialog=!0},saveTask:function(){if(this.taskFormIsValid){this.taskForm.car=this.form.car,this.taskForm.customer=this.form.station;var t=JSON.parse(JSON.stringify(this.taskForm));if(Object(t).hasOwnProperty("__index")&&null!=t.__index){var e=this.form.tasks.findIndex(function(e){return e.__index==t.__index});this.form.tasks[e]=t,this.form.tasks.sort()}else this.form.tasks.push(t);this.showTaskdialog=!1}},clearTaskForm:function(){var t=this;Object.keys(this.taskForm).forEach(function(e){return t.taskForm[e]=null})},changeCar:function(t){if(t){var e=this.options.cars.find(function(e){return e.id==t});this.selectedCar=e,this.form.fuel=e.fuel.name,this.form.fuel_balance_on_dep=e.fuel_balance,this.form.dep_km=e.mileage}},calcTotalFuel:function(t){var e=this;if(t){var a,o,i=this.options.cars.find(function(t){return t.id==e.form.car}),s=this.taskForm.conditions,r=this.taskForm.distance;if(s){switch(s){case"SN":a=i.rate_normal_s;break;case"SH":a=i.rate_hard_s;break;case"WN":a=i.rate_normal_w;break;case"WH":a=i.rate_hard_w;break}r&&(o=a*r/100,this.taskForm.total_fuel=o.toFixed(2))}}},getWaybill:function(){var t=this;this.$axios.get("/api/v1/waybill/"+this.id+"/").then(function(e){t.instance=e.data,t.getOrganizations(),t.getStations()}).catch(function(t){})},getOrganizations:function(){var t=this;this.$axios.get("/api/v1/organizations/").then(function(e){t.options.organizations=e.data.organizations}).catch(function(t){})},getCars:function(t){var e=this,a={kind:t},o={auth:this.$root.auth,params:a};this.$axios.get("/api/v1/car/",o).then(function(t){e.options.cars=t.data.cars}).catch(function(t){})},getStations:function(t){var e=this,a={organization:t};this.$axios.get("/api/v1/stations/",{params:a}).then(function(t){e.options.stations=t.data.stations}).catch(function(t){})},getWorkers:function(t){var e=this,a={station:t};this.$axios.get("/api/v1/workers/",{params:a}).then(function(t){e.options.workers=t.data.workers}).catch(function(t){})}},mounted:function(){this.id?this.getWaybill():this.getOrganizations()},watch:{instance:function(t){t&&(this.form.id=t.id,this.form.number=t.number,this.form.station=t.station.id,this.form.organization=t.organization.id,this.form.type_of=t.type_of,this.form.date=t.date,this.form.period_from=t.period_from,this.form.period_to=t.period_to,this.form.car=t.car.id,this.form.departament=t.departament,this.selectedCar=t.car,this.form.fuel=t.car.fuel.name,t.period_to&&t.period_from?this.periodic=!0:this.periodic=!1,this.form.dispatcher=t.dispatcher?t.dispatcher.id:null,this.form.driver=t.driver.id,this.form.car_took=t.car_took.id,this.form.check_out_allow=t.check_out_allow.id,this.form.auto_accept=t.auto_accept.id,this.form.auto_passed=t.auto_passed.id,this.form.comment=t.comment,this.form.is_completed=t.is_completed,this.form.tasks=t.tasks,this.form.fuel_balance_on_dep=t.fuel_balance_on_dep,this.form.fuel_balance_on_ret=t.fuel_balance_on_ret,this.form.fuel_issued=t.fuel_issued,this.form.dep_km=t.dep_km,this.form.ret_km=t.ret_km,this.form.dep_date=t.dep_date,this.form.ret_date=t.ret_date,this.form.dep_fact=t.dep_fact,this.form.ret_fact=t.ret_fact,this.form.total_fuel=t.total_fuel,this.form.total_km=t.total_km,this.form.total_hours=t.total_hours)},"form.type_of":function(t){t&&this.getCars(t)},"form.tasks":function(t){if(t.length>0){for(var e=0,a=0,o=t[0].departure,i=t[t.length-1].arrival,r=s["d"].getDateDiff(new Date(i),new Date(o),"hours"),n=0;n<t.length;n++)e+=t[n].distance,a+=parseFloat(t[n].total_fuel);this.form.total_km=e,this.form.total_fuel=a.toFixed(2),this.form.total_hours=r,this.form.fuel_balance_on_ret=(parseFloat(this.form.fuel_balance_on_dep)-parseFloat(a)+parseFloat(this.form.fuel_issued)).toFixed(2),this.form.ret_km=this.form.dep_km+e,this.form.dep_date=o,this.form.ret_date=i}else this.form.dep_date=this.form.ret_date=this.form.ret_km=this.form.fuel_balance_on_ret=this.form.total_km=this.form.total_fuel=this.form.total_hours=null},"form.fuel_issued":function(t){t&&(this.form.fuel_balance_on_ret=(parseFloat(this.form.fuel_balance_on_dep)-parseFloat(this.form.total_fuel)+parseFloat(t)).toFixed(2))},"form.organization":function(t){t&&this.getStations(t)},"form.station":function(t){t&&this.getWorkers(t)},"form.dep_date":function(t){this.form.dep_fact=t},"form.ret_date":function(t){this.form.ret_fact=t}},computed:{sectionComplete:function(){var t=!1;switch(this.step){case"main":if(this.form.number&&this.form.date&&this.form.organization&&this.form.station&&this.form.car&&this.form.type_of){t=!0;break}case"personal":if(this.form.driver&&this.form.check_out_allow&&this.form.car_took&&this.form.auto_accept&&this.form.auto_passed){t=!0;break}case"tasks":if(this.form.tasks.length>0){t=!0;break}}return t},is_editable:function(){return!this.instance},is_valid:function(){var t=this;return!!(this.options.required_fields.every(function(e){return null!==t.form[e]})&&this.form.tasks.length>0)},taskFormIsValid:function(){return!!(this.taskForm.from_dest&&this.taskForm.to_dest&&this.taskForm.departure&&this.taskForm.arrival&&this.taskForm.distance&&this.taskForm.kind&&this.taskForm.conditions)}}},n=r,l=(a("+es5"),a("KHd+")),c=Object(l["a"])(n,o,i,!1,null,null,null);e["default"]=c.exports}}]);