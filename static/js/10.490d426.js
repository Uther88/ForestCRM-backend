(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"45c1":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex justify-center col col-md-auto",staticStyle:{margin:"auto 0"}},[o("div",{staticClass:"bg-white q-pa-sm col-md-4 col-xs-12 shadow-5",style:{padding:t.$q.platform.is.desktop?"15px":"5px"}},[o("q-field",{attrs:{icon:"account box","icon-color":"secondary"}},[o("q-select",{attrs:{radio:"","float-label":"Выполняющий",options:t.$store.state.main.users.map(function(t){return{label:t.full_name,value:t.id}}),filter:""},model:{value:t.form.performer,callback:function(e){t.$set(t.form,"performer",e)},expression:"form.performer"}})],1),o("q-field",{attrs:{icon:"warning","icon-color":"secondary"}},[o("q-select",{attrs:{"float-label":"Важность",radio:"",options:t.importances},model:{value:t.form.importance,callback:function(e){t.$set(t.form,"importance",e)},expression:"form.importance"}})],1),o("q-field",{attrs:{icon:"date range","icon-color":"secondary"}},[o("q-datetime",{attrs:{"float-label":"Выполнить до",value:t.form.to_complete,type:"datetime",format:"DD.MM.YYYY, HH:mm"},on:{change:function(e){t.form.to_complete=new Date(e).toString().split("GMT")[0]}}})],1),o("q-field",{attrs:{icon:"title","icon-color":"secondary"}},[o("q-input",{attrs:{"float-label":"Название"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("q-field",{attrs:{icon:"edit","icon-color":"secondary"}},[o("q-input",{attrs:{type:"textarea",rows:"4","float-label":"Описание"},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1),o("q-field",{attrs:{icon:"attachment","icon-color":"secondary"}},[o("q-uploader",{ref:"task_files",staticClass:"generic-margin",attrs:{url:"","float-label":"Файлы:",multiple:"",clearable:"","hide-upload-button":!0,"auto-expand":"","hide-upload-progress":""},on:{add:t.addFile,"remove:cancel":t.removeFile}})],1),o("div",{staticClass:"row justify-around q-pa-sm"},[o("q-btn",{attrs:{color:"negative",label:"Отчистить",type:"button"},nativeOn:{click:function(e){return t.resetForm(e)}}}),o("q-btn",{attrs:{color:"positive",label:"Сохранить",disabled:!t.is_valid,type:"button"},nativeOn:{click:function(e){return t.saveTask(e)}}})],1)],1)])},i=[];r._withStripped=!0;o("yt8O"),o("hhXQ"),o("rGqo");var a={name:"TaskCreatePage",props:["user"],data:function(){return{importances:[{label:"Низкая",value:"success"},{label:"Средняя",value:"warning"},{label:"Высокая",value:"danger"}],form:{performer:null,importance:null,to_complete:null,title:null,text:null,files:[]}}},methods:{resetForm:function(){this.form.title=this.form.text=this.form.to_complete=this.form.performer=this.form.importance=null,this.form.files=[],this.$refs["task_files"].reset()},saveTask:function(){var t=this;if(this.is_valid){var e=new FormData;e.append("title",this.form.title),e.append("text",this.form.text),e.append("performer",this.form.performer),e.append("importance",this.form.importance),e.append("to_complete",this.form.to_complete);for(var o=0;o<this.form.files.length;o++){var r=this.form.files[o];e.append("files",r)}this.$axios.post("/api/v1/task/",e).then(function(e){t.resetForm(),t.$q.notify({message:"Готово!",color:"positive",type:"positive",detail:"Созданно новое задание"})}).catch(function(e){t.$q.notify({message:e.message,color:"negative",type:"negative"})})}},addFile:function(t){var e=this;t.forEach(function(t){e.form.files.push(t)})},removeFile:function(t){this.form.files=this.form.files.filter(function(e){return e!==t})}},mounted:function(){this.user&&(this.form.performer=this.user)},computed:{is_valid:function(){return Object.values(this.form).every(function(t){return t})}}},n=a,l=(o("ltls"),o("KHd+")),s=Object(l["a"])(n,r,i,!1,null,null,null);e["default"]=s.exports},UExd:function(t,e,o){var r=o("DVgA"),i=o("aCFj"),a=o("UqcF").f;t.exports=function(t){return function(e){var o,n=i(e),l=r(n),s=l.length,c=0,f=[];while(s>c)a.call(n,o=l[c++])&&f.push(t?[o,n[o]]:n[o]);return f}}},cG2x:function(t,e,o){},hhXQ:function(t,e,o){var r=o("XKFU"),i=o("UExd")(!1);r(r.S,"Object",{values:function(t){return i(t)}})},ltls:function(t,e,o){"use strict";var r=o("cG2x"),i=o.n(r);i.a}}]);